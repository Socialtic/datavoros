# 911 CDMX

## Fecha de an√°lisis

- **An√°lisis est√°tico (mediante Exodus Privacy):** 30 marzo 2022   
- **An√°lisis din√°mico (mediante captura de tr√°fico de red):** 28 abril 2022   
- **An√°lisis posteriores:**

## Archivos analizados
[apk versi√≥n 1.3.5](http://cloud.datavoros.org/index.php/s/eeoTJKzEGPxpBFW)   
[pcap versi√≥n 1.3.5](http://cloud.datavoros.org/index.php/s/gde2mT24t8AXjTZ)

## Descripci√≥n de la aplicaci√≥n

- **Tipo:** Aplicaci√≥n de emergencias de la CDMX   
- **Costo:** Gratuito   
- **Link:** [https://play.google.com/store/apps/details?id=com.desarrollo.c5.app_066_android_2&hl=es](https://play.google.com/store/apps/details?id=com.desarrollo.c5.app_066_android_2&hl=es)       
- **Descargas:** 1,000,000+   
- **Fecha de actualizaci√≥n:** 22 Mayo 2020   
- **Versi√≥n:** 1.3.5   
- **Desarrollador:** [https://www.c5.cdmx.gob.mx/](https://www.c5.cdmx.gob.mx/)   
- **Firma:** CAEPCCM    
- **Contacto:** ciudadsegura@cdmx.gob.mx   
- **Condiciones de uso y Pol√≠tica de privacidad:**  
  - [https://www.c5.cdmx.gob.mx/terminos911cdmx](https://www.c5.cdmx.gob.mx/terminos911cdmx)

- **Uso seg√∫n la PlayStore:**

~~~
La aplicaci√≥n inform√°tica para el uso del Servicio de Atenci√≥n de Llamadas de
Emergencia 911 en dispositivos m√≥viles Android, es un proyecto que el Gobierno
de la Ciudad de M√©xico, a trav√©s del Centro de Comando, Control, C√≥mputo,
Comunicaciones y Contacto Ciudadano de la Ciudad de M√©xico, desarroll√≥,
implement√≥ y opera, con el objeto de poner a disposici√≥n de la poblaci√≥n en la
Ciudad de M√©xico, una herramienta tecnol√≥gica que facilite solicitar auxilio
a las autoridades locales, en caso de una emergencia.
~~~

## Trackers identificados (mediante Exodus Privacy)

- [Google Crashlytics](https://firebase.google.com/products/crashlytics)   
- [Google Firebase Analytics](https://firebase.google.com/products/analytics)

Enlace a [reporte](https://reports.exodus-privacy.eu.org/es/reports/com.desarrollo.c5.app_066_android_2/latest/)   

## Empresas relacionadas con esta aplicaci√≥n

- [Alphabet](https://abc.xyz/) a trav√©s de Google (Trackers y servicio de ubicaci√≥n)(Trackers y ubicaci√≥n)
- [Twitter](https://about.twitter.com/es) (Funci√≥n de notificaciones sobre temblores)
- Uninet ([Telmex](https://telmex.com/)) (Servidores donde est√° albergada la aplicaci√≥n)
- Edgecast (comprada por [edg.io](https://edg.io/))(Servidor relacionado con Twitter)

## Permisos

- **Seg√∫n la Playstore:** 11 permisos
- **Seg√∫n Exodus Privacy:** 14 permisos.   
- **Seg√∫n prueba de uso:** 7 permisos que se piden de manera expl√≠cita.


### Permisos seg√∫n la PlayStore

Esta aplicaci√≥n tiene acceso a:

- ![imagen](https://user-images.githubusercontent.com/102829552/165589662-61f0133f-2933-45d5-9789-fde06ef0785b.png)ID de dispositivo y datos de llamadas

  - Leer la identidad y el estado del dispositivo


- ![imagen](https://user-images.githubusercontent.com/102829552/165589611-9dec40f8-a24a-4fa3-bdf8-922ffc380ce1.png) Fotos/datos multimedia/archivos

  - Leer el contenido del dispositivo USB
  - Modificar o eliminar el contenido del almacenamiento USB


- ![imagen](https://user-images.githubusercontent.com/102829552/165589611-9dec40f8-a24a-4fa3-bdf8-922ffc380ce1.png) C√°mara

  - Tomar fotograf√≠as y grabar videos


- ![imagen](https://user-images.githubusercontent.com/102829552/165633301-50dd7758-728f-4712-87bb-929a38c8878f.png) Contactos

  - Leer tus contactos


- ![imagen](https://user-images.githubusercontent.com/102829552/165589563-392a213f-de5f-4f8e-8e59-4e0e2da106c5.png) Almacenamiento

  - Leer el contenido del dispositivo USB
  - Modificar o eliminar el contenido del almacenamiento USB

- ![imagen](https://user-images.githubusercontent.com/102829552/165589440-63853abc-5ae8-4677-b60e-f605577e9881.png)Ubicaci√≥n

  - Ubicaci√≥n precisa (seg√∫n el GPS y la red)


- ![imagen](https://user-images.githubusercontent.com/102829552/165589549-160b571e-067e-4a71-8000-31bce52a530b.png)Tel√©fono

  - Leer la identidad y el estado del dispositivo
  - Llamar directamente a n√∫meros de tel√©fono


- ‚ùîOtro

  - Recibir datos desde Internet
  - Impedir que el dispositivo entre en modo de suspensi√≥n
  - Ver conexiones de red
  - Acceso completo a la red



### Permisos seg√∫n Exodus Privacy

- ![imagen](https://user-images.githubusercontent.com/102829552/165589993-2aa5535d-fbb0-45a7-84b5-ad709cf3fcc0.png):exclamation:ACCESS_FINE_LOCATION   
_Access precise location (GPS and network-based)_

- ACCESS_NETWORK_STATE   
_View network connections_

- ACCESS_NOTIFICATION_POLICY   
_Access Do Not Disturb_

- ![imagen](https://user-images.githubusercontent.com/102829552/165590152-18dcfe36-f5d6-4d7a-87b0-1dc847770edb.png):exclamation:CALL_PHONE   
_Directly call phone numbers_

- ![imagen](https://user-images.githubusercontent.com/102829552/165590237-49e9bf90-9c95-44ae-aea7-5cbecf02a35d.png):exclamation:CAMERA   
_Take pictures and videos_

- FOREGROUND_SERVICE   
_Run foreground service_

- INTERNET   
_Have full network access_

- ![imagen](https://user-images.githubusercontent.com/102829552/165633822-fbbd5595-eba4-4986-86d5-22dde56764b3.png):exclamation:READ_CONTACTS   
_read your contacts_

- ![imagen](https://user-images.githubusercontent.com/102829552/165590322-82cf5301-63b1-4ae9-858b-7e3bf648a9ed.png):exclamation:READ_EXTERNAL_STORAGE   
_read the contents of your SD card_

- ![imagen](https://user-images.githubusercontent.com/102829552/165590152-18dcfe36-f5d6-4d7a-87b0-1dc847770edb.png):exclamation:READ_PHONE_STATE   
_read phone status and identity_

- WAKE_LOCK   
_prevent phone from sleeping_

- ![imagen](https://user-images.githubusercontent.com/102829552/165590322-82cf5301-63b1-4ae9-858b-7e3bf648a9ed.png):exclamation:WRITE_EXTERNAL_STORAGE   
_modify or delete the contents of your SD card_

- RECEIVE

- BIND_GET_INSTALL_REFERRER_SERVICE

### Permisos solicitados durante el uso de la aplicaci√≥n

- üîµ Acceso a ubicaci√≥n
- üîµ Acceso a llamadas telef√≥nicas
- üîµ Acceso a contactos

üîµ Este √≠cono indica un permiso opcional pero se pierde una funcionalidad particular

## Datos

### Datos solicitados al usuario durante el uso de la aplicaci√≥n

- üî¥ N√∫mero de celular
- ‚ö™ Compa√±√≠a telef√≥nica
- üî¥ Nombre
- üî¥ Apellido Paterno
- üî¥ Apellido Materno
- ‚ö™ Fecha de nacimiento
- üî¥ Correo electr√≥nico
- ‚ö™ Calle
- ‚ö™ N√∫mero
- ‚ö™ Colonia
- ‚ö™ Delegaci√≥n
- ‚ö™ C.P.
- ‚ö™ Ficha de salud
  - üî¥ Edad
  - ‚ö™ Sexo
  - ‚ö™ Tipo de sangre
  - ‚ö™ Padecimiento
  - üî¥ Enfermedad cr√≥nica
  - üî¥ Alergias
  - üî¥ Suministro de medicamentos


üî¥ Este √≠cono indica que se debe ingresar este dato de manera obligatoria.   
‚ö™ Este √≠cono indica que estos datos son opcionales.

### Tabla de conexiones realizadas durante el uso de la Aplicaci√≥n

| Direcci√≥n IP    | Paquetes | Pa√≠s          | Ciudad        | N√∫mero AS | Organizaci√≥n AS     |
|-----------------|----------|---------------|---------------|-----------|---------------------|
| 104.244.42.8    |      100 | United States |               |     13414 | TWITTER             |
| 104.244.42.130  |      125 | United States |               |     13414 | TWITTER             |
| 142.250.123.188 |        2 | United States |               |     15169 | GOOGLE              |
| 142.250.190.3   |       20 | United States |               |     15169 | GOOGLE              |
| 142.250.190.10  |        3 | United States |               |     15169 | GOOGLE              |
| 142.250.190.42  |       92 | United States |               |     15169 | GOOGLE              |
| 142.250.190.74  |      899 | United States |               |     15169 | GOOGLE              |
| 142.250.190.78  |      478 | United States |               |     15169 | GOOGLE              |
| 142.250.190.138 |       53 | United States |               |     15169 | GOOGLE              |
| 142.250.191.170 |      144 | United States |               |     15169 | GOOGLE              |
| 142.250.191.202 |       25 | United States |               |     15169 | GOOGLE              |
| 142.250.191.206 |       34 | United States |               |     15169 | GOOGLE              |
| 142.250.191.227 |        3 | United States |               |     15169 | GOOGLE              |
| 142.250.191.238 |       38 | United States |               |     15169 | GOOGLE              |
| 142.251.4.188   |       28 | United States |               |     15169 | GOOGLE              |
| 142.251.16.92   |       22 | United States |               |     15169 | GOOGLE              |
| 142.251.32.10   |      719 | United States |               |     15169 | GOOGLE              |
| 172.217.1.106   |        6 | United States |               |     15169 | GOOGLE              |
| 172.217.2.46    |       26 | United States |               |     15169 | GOOGLE              |
| 187.174.224.151 |      178 | M√©xico        | Mexicaltzingo |      8151 | Uninet S.A. de C.V. |
| 189.247.22.77   |     2047 | M√©xico        |               |      8151 | Uninet S.A. de C.V. |
| 189.247.22.78   |     1431 | M√©xico        |               |      8151 | Uninet S.A. de C.V. |
| 189.247.22.81   |     1371 | M√©xico        |               |      8151 | Uninet S.A. de C.V. |
| 192.229.173.16  |       34 | United States |               |     15133 | EDGECAST            |

### ![Mapa de conexiones](./mapa_911cdmx.png)



### Notas sobre datos recolectados

- La aplicaci√≥n contacta a los servidores de google por dos razones: los mapas y la geolocalizaci√≥n y por los trackers de Firebase y Crashlytics. Firebase asigna [firebaseinstallations](https://firebase.google.com/docs/reference/android/com/google/firebase/installations/FirebaseInstallations) una id particular a la instalaci√≥n de la app. De ah√≠ recolecta, a trav√©s de app-measurement.com toda una serie de eventos realizados en la aplicaci√≥n. Aqu√≠ los enlaces a todos los eventos y datos que, de manera est√°ndar se recolectan [1](https://support.google.com/firebase/answer/9234069?hl=en&ref_topic=6317484&visit_id=637859685880636053-1936242821&rd=1), [2](https://support.google.com/firebase/answer/9268042?hl=en&ref_topic=6317484&visit_id=637859685880636053-1936242821&rd=1), [3](https://support.google.com/firebase/answer/7029846?hl=en&ref_topic=7029512).
- Los servidores de Twitter son contactados por la funci√≥n de notificaciones sobre temblores.
- El servidor de Edgecast est√° relacionado con Twitter.
- En el servidor 189.174.224.151 de Uninet sirve para el registro de los usuarios. Las llamadas a este servidor son en HTTP, es decir que no est√°n cifradas. Los datos que se mandan son los datos de registro del usuario adem√°s del tipo de sistema operativo, un identificador de telefon√≠a y el modelo del celular. Asimismo el token de autenticaci√≥n y la llave son tambi√©n mandados en texto plano.
- En este mismo servidor, tambi√©n en HTTP, se almacenan y mandan en texto plano los datos del usuario que uno agrega en la secci√≥n de la *Ficha de salud* y los datos del seguro m√©dico.
- En el servidor arriba mencionado se mandan tambi√©n en texto plano las modificaciones de las opciones de servicios de *Anuncios P√∫blicos*, *Llamadas de extorsi√≥n* y *Alerta s√≠smica*. Adem√°s los datos de la *Red de contactos de emergencia*.
- Tambi√©n en texto plano se mandan los datos cuando uno hace una llamada de emergencia con el bot√≥n de auxilio. 

## Tabla de relaci√≥n entre permisos y funciones

| Permisos  | Funciones relacionadas  |
|---|---|
| ACCESS_FINE_LOCATION  | Servicio de ubicaci√≥n  |
| ACCESS_NETWORK_STATE  | Servicio de ubicaci√≥n  |
| ACCESS_NOTIFICATION_POLICY  | Alarma s√≠smica  |
| CALL_PHONE  | Llamada 911  |
| CAMERA  | Chat  |
| FOREGROUND_SERVICE  | Bot√≥n de p√°nico  |
| INTERNET | Internet  |
| READ_CONTACTS  | Mi red emergencias  |
| READ_EXTERNAL_STORAGE  | Chat  |
| READ_PHONE_STATE  | Llamada 911  |
| WAKE_LOCK  | Bot√≥n de p√°nico  |
| WRITE_EXTERNAL_STORAGE  | Chat  |
| RECEIVE  | Push Notifications  |
| BIND_GET_INSTALL_REFERRER_SERVICE  | Firebase Tracker  |

### Funciones espec√≠ficas de la aplicaci√≥n

- Alerta s√≠smica
- Anuncios P√∫blicos
- Llamadas de extorsi√≥n
- Widgets: chat de emergencia, llamada 911, llamada silenciosa

## Notas

- La Leyenda de tratamiento de datos debe ser aceptada de manera expresa.
- El link a la p√°gina de Pol√≠ticas de privacidad en la Playstore est√° mal.
- Intentamos agregar un contacto a la red de emergencias pero no se pudo. Aunque el contacto ten√≠a la aplicaci√≥n instalada (requerimiento necesario), la aplicaci√≥n no identific√≥ que ese contacto la ten√≠a instalada.
- Si el usuario instala la aplicaci√≥n y luego la desinstala, no es posible volver a registrarse. Se tiene que hacer un restablecimiento de f√°brica del celular para poder hacerlo.
- El registro no siempre funciona a la primera, a veces hay que abrir y cerrar la aplicaci√≥n varias veces.
- El aviso de emergencia por chat no funcion√≥.
- La funci√≥n *Llamada silenciosa* simplemente abre una llamada a 911.
- En un celular la funci√≥n de localizaci√≥n no funcion√≥, en otro s√≠.
- La funci√≥n de chat no funcion√≥.

## Conclusiones

- La aplicaci√≥n hace las llamadas al servidor de Uninet 187.174.224.151 en texto plano, es decir que no est√° cifrado. Todos los datos que el usuario otorga de manera voluntaria adem√°s de un identificador de telefon√≠a, el sistema operativo, el modelo del celular y la llave y el token de autenticaci√≥n, no est√°n cifrados. Las llamadas de emergencia a trav√©s del bot√≥n de p√°nico, tampoco. Esto es un problema de seguridad may√∫sculo.
- La relaci√≥n entre permisos y funciones es sim√©trica y no hay nada fuera de lo normal.
- El uso de trackers no es excesivo, aunque nos preocupa la integraci√≥n con Twitter en la informaci√≥n s√≠smica. No estamos seguros de que esto sea necesariamente un problema de privacidad, pero existe dicha posibilidad debido a las pr√°cticas agresivas de rastreo que tiene esa empresa.
- Hay varias funciones que no sirven o sirven a medias y est√° el _bug_ (error) que niega la posibilidad de instalar la aplicaci√≥n dos veces en un mismo celular sin antes tener que revertirlo a sus configuraciones de f√°brica.
