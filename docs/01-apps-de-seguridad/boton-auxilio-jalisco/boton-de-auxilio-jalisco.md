# Bot√≥n de Auxilio Jalisco

## Fecha de an√°lisis

- **An√°lisis est√°tico (mediante Exodus Privacy):** 12 abril 2022    
- **An√°lisis din√°mico (mediante an√°lisis de tr√°fico de red):** 12 abril 2022  
- **An√°lisis posteriores:** 9 agosto 2022 / 17 octubre 2022 / 23 octubre 2023

## Archivos analizados
[apk versi√≥n 94](http://cloud.datavoros.org/index.php/s/23wJc5E9QcMoNXy)   
[pcap versi√≥n 94](http://cloud.datavoros.org/index.php/s/Km2p6tCHFkkPMgx)

[apk versi√≥n 95](http://cloud.datavoros.org/index.php/s/qzfHWRKXTMBxDnn)   
[pcap versi√≥n 95](http://cloud.datavoros.org/index.php/s/qdJSGPot6KqbJz7)

[apk versi√≥n 96](http://cloud.datavoros.org/index.php/s/HW7YjLeYTPTjPmx)   
[pcap versi√≥n 96](http://cloud.datavoros.org/index.php/s/FLTBnHWgyetSWiK)   

[apk versi√≥n 105]
[pcap versi√≥n 105]

## Descripci√≥n de la aplicaci√≥n

- **Tipo:** Aplicaci√≥n de emergencia del estado de Jalisco   
- **Costo:** Gratuito   
- **Link:** [https://play.google.com/store/apps/details?id=com.jpriskcorp.botonpanicoapp.jal](https://play.google.com/store/apps/details?id=com.jpriskcorp.botonpanicoapp.jal)      
- **Descargas:** 50,000+  
- **Fecha de actualizaci√≥n:** 13 Enero 2022 / 16 Agosto 2022 / 2 octubre 2023
- **Versi√≥n:**  94 / 95 / 96 /105
- **Desarrollador:**  [https://c5jalisco.gob.mx/](https://c5jalisco.gob.mx/)  
- **Firma:**  riskcorp@yahoo.com.mx
- **Contacto:**  operativaceinco@gmail.com   
- **Condiciones de uso y Pol√≠tica de privacidad:**  
  - [https://fge.jalisco.gob.mx/content/terminos-y-politicas-boton-de-panico](https://fge.jalisco.gob.mx/content/terminos-y-politicas-boton-de-panico)  
  - **Wayback Machine**: [https://web.archive.org/web/20231023172144/https://fge.jalisco.gob.mx/content/terminos-y-politicas-boton-de-panico](https://web.archive.org/web/20231023172144/https://fge.jalisco.gob.mx/content/terminos-y-politicas-boton-de-panico)

- **Descripci√≥n en PlayStore**
~~~
El Bot√≥n de Auxilio Jalisco es una aplicaci√≥n para smartphones del Estado de Jalisco que
permite que el usuario registrado pueda enviar una alerta inmediata al Centro de Coordinaci√≥n,
Comando, Control, Comunicaciones, y C√≥mputo del Estado de Jalisco (Escudo Urbano C5 Jalisco).

La aplicaci√≥n env√≠a directamente la alerta al Escudo Urbano C5, en donde personal calificado recibe
el caso y efect√∫a todos los pasos establecidos para dar curso a la situaci√≥n y resolver el problema
de manera r√°pida y efectiva.
~~~
~~Recuerde en casos de emergencia se sugiere llamar a la l√≠nea 9-1-1. En caso que esto no sea posible,
esta aplicaci√≥n surge como una v√≠a alternativa de contacto con las autoridades para denunciar un
caso de emergencia. Tan s√≥lo presionando el bot√≥n de p√°nico sus datos previamente registrados en el
sistema y su geolocalizaci√≥n son enviadas autom√°ticamente al Escudo Urbano C5.
Utiliza esta aplicaci√≥n con responsabilidad.~~       

## Rastreadores identificados (mediante Exodus Privacy)

- ~~[Google Admob](https://admob.google.com/home/)~~
- ~~[Google Analytics](https://marketingplatform.google.com/about/analytics/)~~  
- ~~[Google Crashlytics](https://firebase.google.com/products/crashlytics/)~~
- ~~[Google Firebase Analytics](https://firebase.google.com/)~~
- ~~[Google Tag Manager](https://marketingplatform.google.com/about/tag-manager/)~~

** Desde la versi√≥n 95 ya no hay rastreadores y se mantiene as√≠ hasta la versi√≥n 105**   
Enlace a los reportes:    
- Versi√≥n 94 [reporte](https://reports.exodus-privacy.eu.org/es/reports/249402/)   
- Versi√≥n 95 [reporte](https://reports.exodus-privacy.eu.org/es/reports/280672/)    
- Versi√≥n 96 [reporte](https://reports.exodus-privacy.eu.org/es/reports/301588/)   
- Versi√≥n 105 [reporte](https://reports.exodus-privacy.eu.org/es/reports/394384/)   

## Empresas relacionadas con esta aplicaci√≥n

- [Alphabet](https://abc.xyz/) a trav√©s de Google (Trackers y servicio de ubicaci√≥n)(Trackers y ubicaci√≥n)
- [Coeficiente comunicaciones](https://coeficientemx.com/) (Servidor donde est√° almacenada la aplicaci√≥n)

## Permisos

- **Seg√∫n la Playstore:** :no_entry_sign: 12 permisos --> 15 permisos.
- **Seg√∫n Exodus Privacy:** :no_entry_sign: 15 permisos --> 14 permisos.
- **Seg√∫n prueba de uso:** 5 permisos que se piden de manera expl√≠cita.

**Las secciones marcadas con :no_entry_sign: son secciones que ya no aplican porque cambiaron en una versi√≥n m√°s reciente. Las mantenemos por objetividad en la documentaci√≥n*


### Permisos seg√∫n la PlayStore

Esta aplicaci√≥n puede acceder a:   

- ![imagen](https://user-images.githubusercontent.com/102829552/165629344-e744820c-f52d-4359-8238-ee3e3d1494b1.png)
Contactos

    - Consultar tus contactos


- ![imagen](https://user-images.githubusercontent.com/102829552/165629369-d867e558-7e41-41ad-905c-4bbd24597e41.png)
Ubicaci√≥n

    - Ubicaci√≥n aproximada (basada en red)
    - Ubicaci√≥n precisa (basada en red y GPS)


- ![imagen](https://user-images.githubusercontent.com/102829552/165629391-9c779048-f477-4a4e-8155-d294f78daf7a.png)
Tel√©fono

    - Llamar directamente a n√∫meros de tel√©fono
    - Consultar la identidad y el estado del tel√©fono


- ![imagen](https://user-images.githubusercontent.com/102829552/165629423-307f26bf-db54-459c-bbb4-50a58a0dd9a9.png)
Fotos/multimedia/archivos

    - Leer el contenido de tu almacenamiento USB
    - :no_entry_sign: Modificar o eliminar contenido del almacenamiento USB


- ![imagen](https://user-images.githubusercontent.com/102829552/165629440-2f7ca69b-d9ff-4f31-a627-ff03c2ad917f.png)
Almacenamiento

    - Leer el contenido de tu almacenamiento USB
    - Modificar o eliminar contenido del almacenamiento USB


- ![imagen](https://user-images.githubusercontent.com/102829552/165629468-d1fb02c1-f4ef-45c8-b316-fb5c1c420f04.png)
ID de dispositivo e informaci√≥n de llamada

    - Consultar la identidad y el estado del tel√©fono


- ‚ùî Otro

    - :no_entry_sign: Recibir datos de Internet
    - Ver conexiones de red
    - Acceso completo a red
    - Mostrar sobre otras aplicaciones 
    - Controlar la vibraci√≥n
    - Impedir que el dispositivo entre en modo de suspensi√≥n
    - Leer la configuraci√≥n de los servicios de Google

### Permisos seg√∫n Exodus Privacy

- ![imagen](https://user-images.githubusercontent.com/102829552/165629714-c564c696-d04f-481e-ab77-925c3cf74017.png):exclamation:
ACCESS_COARSE_LOCATION   
_Access approximate location (network-based)_

- ![imagen](https://user-images.githubusercontent.com/102829552/165629745-d1c2e269-035c-4658-af7b-e5ce9ee36e75.png):exclamation:
ACCESS_FINE_LOCATION   
_Access precise location (GPS and network-based)_

- ACCESS_NETWORK_STATE   
_View network connections_

- ![imagen](https://user-images.githubusercontent.com/102829552/165629860-bb716424-e37b-48c9-8997-220361adf096.png):exclamation:
CALL_PHONE   
_Directly call phone numbers_

- FOREGROUND_SERVICE   
_Run foreground service_

- INTERNET   
_Have full network access_

- ![imagen](https://user-images.githubusercontent.com/102829552/165629974-9e8550fc-d07d-4d06-9333-ae925b667a76.png):exclamation:
READ_CONTACTS   
_Read your contacts_

- ![imagen](https://user-images.githubusercontent.com/102829552/165629893-d3d776a8-479c-4cb8-b879-de5f80354066.png):exclamation:
READ_PHONE_STATE   
_Read phone status and identity_

- :exclamation:SYSTEM_ALERT_WINDOW
_This app can appear on top of other apps_ **(Este es un nuevo permiso necesario para una nueva funci√≥n)**

- VIBRATE   
_Control vibration_

- WAKE_LOCK   
_Prevent phone from sleeping_

- ![imagen](https://user-images.githubusercontent.com/102829552/165630048-7a93b835-988c-4a7a-a46f-fb6c9022c5ff.png):exclamation:
WRITE_EXTERNAL_STORAGE   
_Modify or delete the contents of your SD card_

- :no_entry_sign: RECEIVE

- READ_GSERVICES   

- :no_entry_sign: C2D_MESSAGE 

- MAPS_RECEIVE   

El icono :exclamation: indica un nivel 'Peligroso' o 'Especial' de acuerdo a los [niveles de protecci√≥n de Google](https://developer.android.com/guide/topics/permissions/overview).

### Permisos solicitados durante el uso de la aplicaci√≥n

- üî¥ Acceso a Ubicaci√≥n
- :large_blue_circle: Acceso a Contactos 
- :large_blue_circle: Acceso a Llamadas 
- üî¥ Acceso a Almacenamiento 
- üî¥ Acceso a Estado del Tel√©fono 

üî¥ Este √≠cono indica un permiso obligatorio

## Datos

### Datos solicitados al usuario durante el uso

- :red_circle: Nombre
- :red_circle: Apellido Paterno
- :large_blue_circle: Apellido Materno
- :red_circle: Correo electr√≥nico
- :red_circle: N√∫mero de tel√©fono
- :red_circle: N√∫mero de contacto
- :large_blure_circle: ~~Direcci√≥n~~
- :large_blue_circle: Riesgos 
- :large_blue_circle: Padecimientos
- :large_blue_circle: ~~Si se es sordo o no~~
- :large_blue_circle: Tipo de usuario ~~(Incluye: particular, transporte p√∫blico, transporte privado, escuela, tienda de conveniencia, nave industrial, otro).~~
- :large_blue_cirlce: ~~Puesto en caso de haber seleccionado alguna empresa en la pregunta anterior.~~

**Notas de la actualizaci√≥n 105**: 
- Se pueden registrar dos tipos de personas usuarias, particulares y ganaderos. 
- Se tiene que aceptar de manera directa los T√©rminos de uso antes de poder registrarse
- Se tiene que aceptar de manera directa el Aviso de privacidad antes de poder registrarse. Este es distinto dentro de la aplicaci√≥n que el que aparece en la p√°gina de la PlayStore.
- Se tiene que aceptar de manera directa la Carta de consentimiento tratamiento de datos personales sensibles y de terceros.
- Ahora existe el campo "Riesgos" que es libre a rellenar por la persona usuaria separado del campo "Padecimientos" que incluye los siguientes:
    - Ninguno
    - Sordo(a)
    - Mudo(a)
    - Sordomudo(a)
    - Otro
- Ahora se pueden editar los datos de la cuenta y en estos se puede agregar tipo de usuario, que ahora es una campo libre y no un despegable de lista.

üî¥ Este √≠cono indica que se debe ingresar este dato de manera obligatoria.   
‚ö™ Este √≠cono indica que estos datos son opcionales.


### Tabla de conexiones realizadas durante el uso de la aplicaci√≥n

| Direcci√≥n IP    | N√∫mero de paquetes | Pa√≠s          | Ciudad  | N√∫mero AS | Organizaci√≥n AS                     |
|-----------------|--------------------|---------------|---------|-----------|-------------------------------------|
| 131.196.248.8   |                140 | M√©xico        | Zapopan |    265524 | COEFICIENTE COMUNICACIONES SA DE CV |
| 142.250.68.42   |                 62 | United States |         |     15169 | GOOGLE                              |
| 142.250.68.74   |                 76 | United States |         |     15169 | GOOGLE                              |
| 142.250.72.174  |                858 | United States |         |     15169 | GOOGLE                              |
| 142.250.101.188 |                  2 | United States |         |     15169 | GOOGLE                              |
| 142.250.141.188 |                 36 | United States |         |     15169 | GOOGLE                              |
| 142.250.176.3   |                 23 | United States |         |     15169 | GOOGLE                              |
| 142.250.176.4   |                 80 | United States |         |     15169 | GOOGLE                              |
| 142.250.188.234 |                 27 | United States |         |     15169 | GOOGLE                              |
| 142.250.189.10  |                 39 | United States |         |     15169 | GOOGLE                              |
| 142.251.40.35   |                 23 | United States |         |     15169 | GOOGLE                              |
| 142.251.40.42   |               1066 | United States |         |     15169 | GOOGLE                              |
| 142.251.40.46   |                  3 | United States |         |     15169 | GOOGLE                              |
| 172.217.14.74   |                 33 | United States |         |     15169 | GOOGLE                              |

### ![Mapa de conexiones](./mapa-version-94.png)



### Notas sobre datos recolectados

- :no_entry_sign: El servidor de Coeficiente Comunicaciones es el _Host_ de la app. Los datos de las llamadas de emergencia hechos a trav√©s de los botones de auxilio se mandan en texto plano. Tambi√©n los datos de registro del usuario mencionados en la secci√≥n "Datos solicitados al usuario durante el uso" son enviados en texto plano (http sin cifrar). 

- :no_entry_sign: La aplicaci√≥n contacta a los servidores de Google por dos razones: los mapas y la geolocalizaci√≥n y por los trackers de Firebase, Analytics, Crashlytics, Tag Manager y Admob. Firebase recolecta toda una serie de eventos realizados en la aplicaci√≥n. Aqu√≠ los enlaces a todos los eventos y datos que, de manera est√°ndar se recolectan [1](https://support.google.com/firebase/answer/9234069?hl=en&ref_topic=6317484&visit_id=637859685880636053-1936242821&rd=1), [2](https://support.google.com/firebase/answer/9268042?hl=en&ref_topic=6317484&visit_id=637859685880636053-1936242821&rd=1), [3](https://support.google.com/firebase/answer/7029846?hl=en&ref_topic=7029512).

- :no_entry_sign: Los trackers [Crashlytics](https://firebase.google.com/docs/crashlytics) y [Analytics](https://firebase.google.com/docs/analytics) son dos subtrackers de Firebase. El primero tiene la funci√≥n de mejorar la aplicaci√≥n al mandar reportes de cierres inesperados de la aplicaci√≥n, el segundo otorga informaci√≥n sobre su uso, lo que no necesariamente es malo. Sin embargo AdMob es un tracker para mostrar banners de publicidad dentro de la aplicaci√≥n mientras que TagManager es un tracker que permite etiquetar secciones de c√≥digo.

## Tabla de relaci√≥n entre permisos y funciones

| Permisos   | Funci√≥n relacionada  |
|---|---|
| ACCESS_COARSE_LOCATION  | Servicio de ubicaci√≥n  |
| ACCESS_FINE_LOCATION  | Servicio de ubicaci√≥n  |
| ACCESS_NETWORK_STATE  | Internet  |
| CALL_PHONE  | Llamadas 911 |
| FOREGROUND_SERVICE  | Bot√≥n de p√°nico  |
| INTERNET  | Internet  |
| READ_CONTACTS  | Agregar contactos de emergencia  |
| READ_PHONE_STATE  | Llamada 911  |
| VIBRATE  | Bot√≥n de p√°nico  |
| WAKE_LOCK  | Bot√≥n de p√°nico    |
| SYSTEM_ALERT_WINDOW | Funci√≥n de Acceso r√°pido |
| WRITE_EXTERNAL_STORAGE  | No sabemos para qu√© lo necesita  |
| :no_entry_sign:RECEIVE  | Push notifications |
| READ_GSERVICES  | Servicio de ubicaci√≥n  |
| :no_entry_sign:C2D_MESSAGE  | Push Notifications  |
| MAPS_RECEIVE  | Permiso innecesario  |

### Funciones espec√≠ficas de la aplicaci√≥n

- Tiene un bot√≥n "Prueba de Servicio" que permite verificar que todo funciona sin que se haga una llamada o notificaci√≥n real de emergencia.
- Incluye Auxilio Ciudadano (Polic√≠a); Bomberos; M√©dicos y llamada directa a 911.
- Incluye bot√≥n de acceso r√°pido (3 toques seguidos del bot√≥n de apagado o bloqueo). Con esto, seg√∫n la documentaci√≥n, se hace un aviso de emergencia de manera autom√°tica. Como la prueba se hizo fuera de Jalisco, no pudimos probar esta funcionalidad. Esta funci√≥n, en la nueva versi√≥n est√° implementada de una manera distinta. 
- Permite modificar los datos, la contrase√±a y darse de baja de la cuenta.

## Notas

- La aplicaci√≥n no funciona si no se le concede el permiso de ubicaci√≥n precisa.
- La aplicaci√≥n no funciona si no se tienen datos y una tarjeta SIM en el celular. Con WiFi no funciona. 
- :no_entry_sign: No logramos darnos de baja. Dec√≠a que el tel√©fono o la contrase√±a estaban mal.

## Conclusiones

- :exlamation: ~~La cantidad de trackers presentes es demasiada. En particular la presencia de AdMob, que sirve para mostrar anuncios, no se explica.~~
- :exclamation: ~~Como las llamadas al servidor de Coeficiente Comunicaciones no est√°n cifradas, tenemos un serio problema de seguridad, ya que los datos de perfil del usuario, y las llamadas de emergencia hechas por los botones de p√°nico, est√°n en texto plano. Tambi√©n nos hace preguntarnos si los datos de los usuarios en el servidor est√°n cifrados.~~
- Nos queda la duda si, al darse un usuario de baja, los datos de dicho usuario se quedan o no almacenados. En todo caso, es la √∫nica aplicaci√≥n analizada que hasta ahora tiene esa funci√≥n.
- La relaci√≥n entre permisos y funciones es relativamente sim√©trica. Fuera de _maps_receive_ que ya no es un permiso necesario para Google maps desde la versi√≥n 3.1.59 de Google Services, nos queda la duda la utilidad del permiso _write_external_storage_

## Adenda actualizaci√≥n versi√≥n 95

- La nueva versi√≥n tiene algunos cambios en la interfaz. Seg√∫n la bit√°cora de cambios de la PlayStore, lo que cambiaron fue esto:
    - Nueva imagen
    - Bot√≥n para elegir el tipo de alerta (Seguridad, bomberos, m√©dica). Eso ya estaba en la versi√≥n anterior.
    - T√©rminos y condiciones
    - Las personas sordas podr√°n enviar mensajes de texto 
- Volvimos a comprobar, con la actualizaci√≥n para ver si las llamadas al servidor de Coeficiente Comunicaciones siguen sin estar cifradas y, en efecto, as√≠ fue.
- En la nueva versi√≥n ya no hay ning√∫n tracker.
- En esta versi√≥n la funci√≥n darse de baja no funcion√≥.


## Adenda actualizaci√≥n 96

- Despu√©s de haberles mencionado el problema de seguridad sobre los datos no cifrados, actualizaron la aplicaci√≥n a esta versi√≥n y ahora ya est√°n cifrados. 
- La funci√≥n para darse de baja ya sirvi√≥.

## Adenda actualizaci√≥n 105

- La aplicaci√≥n manda un c√≥digo de activaci√≥n a la hora de registrarse al correo electr√≥nico proporcionado. Si se pone mal, manda un mensaje de que hay problemas con la conexi√≥n a Internet.
- El acceso al permiso de contactos es s√≥lo necesario si se quieren agregar nuevos contactos adem√°s del necesario para el registro.
- El acceso al permiso de  llamadas es s√≥lo necesario si se quiere hacer una llamada directa a 911.
- Pudimos darnos de baja del servicio. 
- :exclamation: Esta aplicaci√≥n dejar√° de funcionar el 2 de noviembre de 2023 y ahora hay una nueva [Bot√≥n de Auxilio Escudo Urbano](https://play.google.com/store/apps/details?id=com.c5.boton_auxilio_jalisco_flutter&hl=en_US) que la suplir√°. En las aplicaciones analizadas del 25N se encuentra esta nueva aplicaci√≥n. 
- Las lamadas al servidor dns est√°n cifradas.

**Tabla de conexiones**
| Direcci√≥n     | Pa√≠s          | Ciudad  | N√∫mero AS | Organizaci√≥n AS          | Rastreador o dominio contactado |
|---------------|---------------|---------|-----------|--------------------------|---------------------------------|
| 142.251.34.36 | United States | Queens  |     15169 | GOOGLE                   | www.google.com                  |
| 142.251.34.46 | United States | Queens  |     15169 | GOOGLE                   | clients4.google.com             |
| 177.240.2.242 | Mexico        | Zapopan |    262916 | Mega Cable, S.A. de C.V. | botondepanico.jalisco.gob.mx    |

**Notas**: Originalmente la aplicaci√≥n estaba guardada en los servidores de Coeficiente Comunicaciones, ahora es en Megacable. 